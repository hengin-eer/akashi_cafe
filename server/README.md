## GitHubを用いた開発フロー
このドキュメントでは、GitHubを用いた開発フローについて説明します。

### 概要
GitHubを使った開発では、以下のような流れで作業を進めます。

1. **新しい作業用ブランチを作る**
    - まず`main`ブランチにいることを確認しよう。
    - 作業ごとに新しいブランチを作成する。ブランチ名は`feature/`で始めて、何をするか分かる名前にしよう。
    - 例: `feature/create-menulist-page`

2. **作業用ブランチで開発する**
    - 作成したブランチでコードを書いたり、ファイルを編集したりしよう。

3. **変更をコミットする**
    - VS Codeのサイドバーにある「ソース管理」アイコン（分岐マーク）をクリック。
    - 変更したファイルが一覧に表示されるので、コミットしたいファイルを選択して「＋」ボタンでステージする。
    - 上部の入力欄に「どんな変更をしたか」分かるメッセージを入力し、「✔」ボタンでコミットする。
    - ※ コミットは作業の区切りごとにこまめに行うと良いよ。

4. **作業が終わったらプルリクエスト（PR）を作成する**
    - 変更内容を`main`ブランチに取り込んでもらうためにPRを作成する。
    - PRのタイトルは「何をしたか」が分かるように書こう。
    - PRの説明には「どこをどう変えたか」「注意してほしいこと」などを書いておくと親切。

5. **PRをレビューしてもらう**
    - 他のメンバーにPRを見てもらい、問題がなければマージしてもらう。

6. **`main`ブランチを最新にする**
    - PRがマージされたら`main`ブランチに戻り、`git pull`で最新の状態に更新しよう。

> 迷ったら「今どのブランチにいるか」「作業が終わったらPRを出す」を意識しよう！


### Git用語の簡単な解説（具体例つき）

- **コミット（commit）**  
    例：ファイルを編集した後、「ここまで作業したよ」と記録すること。  
    ノートに「今日ここまで進めた」とメモするイメージです。  
    例えば、`menu.py`を編集したら「メニューリストを追加」といったメッセージでコミットします。

- **プッシュ（push）**  
    例：自分のパソコンでコミットした内容を、みんなが見られるGitHubに送ること。  
    学校の課題を先生に提出するイメージです。  
    例えば、コミットした後に「git push」とすると、他のメンバーもあなたの変更を見られるようになります。

- **プルリクエスト（PR, Pull Request）**  
    例：自分の作業内容を「mainブランチに取り込んでほしい」とお願いする仕組み。  
    友達に「この部分を追加してもいい？」と相談するイメージです。  
    例えば、作業用ブランチで作った機能をmainブランチに反映したいときにPRを作成します。

- **プル（pull）**  
    例：GitHub上の最新の変更を自分のパソコンに取り込むこと。  
    みんなで書いたノートの最新版を自分のノートに写すイメージです。  
    例えば、他の人がmainブランチに変更を加えたら、「git pull」で自分の環境も最新にします。

作業の流れとしては「コミット」→「プッシュ」→「プルリクエスト」→「プル」と覚えておくと分かりやすいです。

## コマンド集
開発時に使用するコマンドあれこれをまとめます。

### Git関連のコマンド
#### リモートの変更があった時
リモートの`main`ブランチに変更があった場合、ローカルの`main`ブランチを最新の状態に更新する必要がある。
まず、`main`ブランチに切り替えてから以下のコマンドを実行する。
```bash
git pull
```

フローが分かっていないうちは`main`ブランチに戻ってきたらとりあえず`git pull`をしておくと良いよ。

#### ブランチを切り替える
新しくブランチを作成して切り替える場合は、`-c`オプションを使用する。
例えば、`feature/create-menulist-page`というブランチを作成して切り替える場合は以下のようにする。
```bash
git switch -c feature/create-menulist-page
```

既存のブランチに切り替える場合は、以下のようにする。
```bash
git switch feature/create-menulist-page
```

ブランチ名の命名規則として、以下のルールがあるよ。
基本は`feature/`で始まる。
- `feature/`: 新機能の追加
- `fix/`: バグ修正

### python関連のコマンド
#### 仮想環境の切り替え
Pythonの仮想環境を切り替える場合は、以下のコマンドを使用する。
```bash
. .venv/bin/activate
```

対して仮想環境を終了する場合は、以下のコマンドを使用する。
```bash
deactivate
```

#### Python関連の依存関係が変更されたとき
Python関連の依存関係は`uv`を使用して管理している。
よって、以下のコマンドで依存関係を更新する。
```bash
uv sync
```

**忘れちゃう人がいると思うんで、`uv sync`が必要な場合はPRかLINEのグループに書いておくと良いよ。**

### Docker関連のコマンド
今回Dockerを使用してPostgreSQLを立ち上げている。
Dockerコンテナの起動・停止、PostgreSQLへの接続方法などをまとめる。

#### Dockerコンテナの起動
Dockerコンテナを起動する場合は、以下のコマンドを使用する。
```bash
docker compose up -d
```
#### Dockerコンテナの停止
Dockerコンテナを停止する場合は、以下のコマンドを使用する。
```bash
docker compose down
```
#### 起動したPostgreSQLに接続する
Docker
PostgreSQLに接続する場合は、以下のコマンドを使用する。
```bash
docker exec -it postgres psql -U root akashi_cafe
```
#### Dockerコンテナのログを確認する
稀にDockerコンテナが起動しないことがある。
その場合は、コンテナのログを確認して原因を特定する必要がある。
Dockerコンテナのログを確認する場合は、以下のコマンドを使用する。
```bash
docker compose logs -f
```
